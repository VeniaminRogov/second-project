{% extends 'base.html.twig' %}

{% block title %}Products page{% endblock %}
{% block pageTitle %}Products{% endblock %}
{% block content %}

    <div class="mb-5">
    </div>
    <div class="mb-5">
        {{ form(sortForm) }}
    </div>
       <table class="table table-striped">
           <thead>
           <tr>
               <th scope="col">#</th>
               <th scope="col">Category</th>
               <th scope="col">Image</th>
               <th scope="col">Name</th>
               <th scope="col">Description</th>
               <th scope="col">Price</th>
               <th scope="col">Quantity</th>
               <th scope="col">Is Available</th>
               <th scope="col">Created At</th>
               <th scope="col">Updated At</th>
               <th scope="col">Actions</th>
           </tr>
           </thead>
           <tbody>
           {% for product in pagination %}
               <tr>
                   <th scope="row">{{ product.id }}</th>
                   <td>
                       {{ product.category.name }}
                   </td>
                   <td>
                       {% if product.image == null %}

                       {% else %}
                       <img src="{{ (image_url ~ product.image) | imagine_filter('list_thumb') }}" alt="No found avatar">
                       {% endif %}
                   </td>
                   <td>{{ product.name }}</td>
                   <td>{{ product.description }}</td>
                   <td>{{ product.price }}</td>
                   <td>{{ product.quantity }}</td>
                   <td>
                       {% if product.isAvailable == true %}
                           <div class="d-flex align-items-center justify-content-center">
                               <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-check" viewBox="0 0 16 16">
                                   <path d="M10.97 4.97a.75.75 0 0 1 1.07 1.05l-3.99 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425a.267.267 0 0 1 .02-.022z"/>
                               </svg>
                           </div>
                       {% else %}

                       {% endif %}
                   </td>
                   <td>{{ product.createdAt|date("Y-m-d H:i") }}</td>
                   <td>{{ product.updatedAt|date("Y-m-d H:i") }}</td>
                   <td>
                       <a class="btn btn-primary" href="{{ path('manager_edit_products', {id: product.id}) }}">Edit</a>
                       <a class="btn btn-danger" href="{{ path('manager_delete_products', {id: product.id}) }}">Delete</a>
                   </td>
               </tr>
           {% endfor %}
           </tbody>
       </table>
       <div class="navigation d-flex justify-content-center">
           {{ knp_pagination_render(pagination) }}
       </div>
{% endblock %}